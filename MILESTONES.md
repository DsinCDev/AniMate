# MILESTONES.md

Milestone 1
=============

**Brief Description of Planned DSL idea**  
A DSL that allows the user to do 2D animations, where they can define basic shapes and input height, width and position at specific time instances to represent different frames in a short animation.

**Users and Use Case**  
This DSL is designed with animators and designers of all levels in mind and makes creating animations more accessible, opening doors to creating interesting UI/UX and graphic designs. 

**TA Feedback**  
From our discussion with our TA, we've taken note and made some changes as well:
* Avoiding low level animation, animations made from manipulating pixels 
* Picking a library that can implement basic features
* Do not have to write own parser, can look into using external libraries for parsing AST
* Design patterns/ analysis methods will be based on whether analysis is static or dynamic 

**Follow-up Tasks and Features**  
* Find the exact libraries that will be used, ie. for basic shapes (circles, rectangles)
* Features:
  * Loops to run animation
  * User defined shapes (User can define a class composed of basic shapes)
  * Generic pathing (ie. straight, circular, reverse) where user specifies the type of path they want along with start and end points;       coordinates of path are then autogenerated
  * Scaling of shapes and user defined shapes

Milestone 2
=============
**Planned Division of Main Responsibilities Between Team Members** 
* Design of DSL: Group
* User Studies: Ruonan - users with animation background, Kelly + George + Nerine -  general users (ie. cpsc students, non-cpsc background)
* Implementation: Kelly + Nerine - Tokenizing/Parsing, George + Ruonan (+ Kelly and Nerine as needed) - Implementing in Javascript
  * Tokenizing/ Parsing: discuss tokenization and parsing method together and lay out structure with helper functions. Helper functions     will be divided and worked on individually. 
* Video: Ruonan - Editing, Group - Planning

**Roadmap**
* 9/25/2020 11-1 DSL Design
* 9/25/2020 6-7 DSL User Study
* Milestone 2: September 25
* 9/25/2020 - 9/28/2020 User Study for DSL
  * Ruonan - users with animation background
  * Kelly, George, Nerine - general users (ie. cpsc students, non-cpsc background)
* 9/28/2020 Redesign DSL based on user feedback
  * Start tokenizing and parsing 
* Milestone 3: October 2
* 10/2/2020 - Meeting: communication between parser and implementation
* 10/5/2020 - Meeting: Progress update
  * Tokening, parsing completed
* Milestone 4: October 9
  * Features implemented: 
  * Canvas, basic shapes, scaling, animation loops 
  * Bonus (if time allotted): user defined shapes
* 10/9/2020 - 10/12/2020 - Final User Study
* 10/12/2020 - 10/19/2020
  * Create video
  * Refine implementation based on user study results

**TA Feedback**
* Feedback on Milestone 2:
  * 2-3 people for user studies is fine, but more is better
  * For final user studies, try to use different people but could be interesting to try same animation people to see if language has improved
  * Start planning for video right after Milestone 4 in order to not rush it
  * Break tasks down into more depth
* Preliminary feedback for Milestone 3:
  * DSL is on fence between non-form-like and form-like, so add something extra like looping animations or see response from user studies in case users have suggestions for features they want
  * Simplify EBNF through changing NAME to STRING, DIGIT to NUMBER
  * For user studies, provide a basic manual with a list of language features, some examples, and give them a task to perform

**Summary of Progress**
* Defined grammar of animation language
* Started design of user study
* Task division and timeline

Milestone 3
=============
**Mockup of DSL**

PROGRAM ::= CANVAS SHAPE* GROUP* ANIMATE* <br/>
CANVAS ::= “Canvas {“height=” DIGIT, “width=” DIGIT, (“color=” COLOR)?} <br/>
SHAPE ::= “Shape” NAME { SHAPETYPE “height=” DIGIT , “width=” DIGIT , “color=” COLOR, “x=“ DIGIT , “y=“ DIGIT (,“z-index=” DIGIT)? (, “angle=“ DIGIT)? } <br/>
SHAPETYPE ::= “CIRCLE” | “RECTANGLE” | “TRIANGLE” | “HEXAGON” <br/>
GROUP ::= “Group” NAME {NAME+} <br/> 
ANIMATE ::= “Animate” NAME|GROUP [{ (“X=” DIGIT, “Y=” DIGIT, “startTime=” DIGIT, “endTime=” DIGIT “rotation” = NUMBER)+](“loop=” DIGIT)? <br/>
START := “Start=” [“x=“ DIGIT, “y=“ DIGIT, “time=” DIGIT] <br/>
END ::= “End=”[“x=“ DIGIT, “y=“ DIGIT] <br/>
NAME ::= [a-zA-Z_]+ <br/>
DIGIT ::= [0-9]+        
ANGLE ::= [0-360]+ <br/>
COLOR ::= STRING <br/>
ROTATION ::= “ccw”|”cw” <br/>

**First User Study Feedback**
* Lanaguage consistency
  * Users with programming experience found that allowing for case insensitive input and flexible ordering was confusing
* Language usability/ clarity 
  * Uncertainty as to what happens when shape reaches the end of the canvas
  * For coordinates, some effort was required to know which direction shape is moving based on x and y 
* Desired features
  * Ability to draw lines 
* Suggestions
  * Remove some declarations for required parameters to reduce the length of inputs
  * Change format of Animate to make more intuitive

Overall most users found the language straightforward to use and logical. The main feedback on the language itself is outlined in the points above. There were also some comments regarding the unclarity in documentation and instructions given in the user test which will be accounted for in the final user study.

**TA Feedback**
* Shapes
  * Hexagon may not translate well based on input parameters of height and width
  * Would be more beneficial to have lines instead 
* Removing declarations for require parameters
  * Would be reasonable to implement, trade-off of readability can be accounted for by good error messages 
* User interaction
  * Can be from standalone command line tool or for higher accessibility a HTML page with input form 

**Updated DSL**

PROGRAM ::= CANVAS GEOMETRY* GROUP* ANIMATE* <br/>
CANVAS ::= “Canvas” {HEIGHT, WIDTH(, “color=” COLOR)?} <br/>
GEOMETRY ::= SHAPE | LINE <br/>
SHAPE ::= “Shape” NAME { SHAPETYPE, HEIGHT, WIDTH, POSX, POSY(, “z-index=” NUMBER)?(, “color=” COLOR)? (, “angle=“ ANGLE)?} <br/>
SHAPETYPE ::= “circle” | “rectangle” | “triangle” | “hexagon” <br/>
LINE ::= “Line” NAME {WIDTH, POX, POSY(, “color=” COLOR)?(, “angle=“ ANGLE)?} <br/>
GROUP ::= "Group" NAME {NAME(, NAME)*} <br/>
ANIMATE ::= “Animate” NAME { AT+ (, “loop=” LOOP)?} <br/>
AT ::= [X, Y, START, END(, “rotation=” ROTATION)?] <br/>
START := +NUMBER <br/>
END ::= NUMBER > START <br/>
HEIGHT ::= +NUMBER <br/>
WIDTH ::= +NUMBER <br/>
POSX ::= NUMBER <br/>
POXY ::= NUMBER <br/>
X ::= [0-9]+ <br/>
Y ::= [0-9]+ <br/>
NAME ::= [A-Za-z]+ <br/>
DIGIT ::= [0-9]+      
ANGLE ::= (+|-)[0-360] <br/>
COLOR ::= STRING <br/> 
ROTATION ::= “ccw”|”cw” <br/>
LOOP ::= DIGIT | "inf"

The main changes to the language are as follows:
* Removal of declarations for required parameters
  * Order in language has been updated such that all required parameters come before optional parameters
* Stricter language requirements
  * Inputs will be case sensitive
  * Ordering of inputs will be required to follow the grammar outlined due to removal of declarations for required parameters
* Shapes
  * Added Line to grammar
  * Shape now classified under Geometry along with Line
  * Hexagon to remain for now, but may be removed if there are issues creating it in html
* Animate
  * Updated such that all animations for a certain group are in one place
Documentation has also been updated to account for some aspects from language usability/ clarity in user feedback.
  
**Summary of Progress**
* Finalized DSL grammar based on user and TA feedback
* Finalized program language (Java, HTML, CSS)
* Started tokening and parsing 
  * Determined fixed literals and separators for tokenizing
  * Determined ouput structure from parsing (JSON)

Milestone 4
=============
**Status of Implementation**
* Shape functionality done for 2 shapes, 2 to come
* Line functionality not yet implemented yet
* Animate functionality complete except for looping
* Tokenizing and parsing complete for correct input, still ensuring error handling/checking done properly for incorrect input
* Used external library json-simple for creating JSON OBjects

**Plans for User Study**

We plan to create a short animation that users will try to recreate using our DSL. Each member of the group will handle a user study on their own and the results will be collected and analyzed later.

**Planned Timeline for Remaining Days**
* 10/9/2020 - 10/12/2020
  * Complete Implementation
* 10/12/2020
  * Begin video creation
* 10/12/2020 - 10/14/2020
  * Final user studies
* 10/15/2020 - 10/19/2020
  * Complete video for class
  * Refine implementation based on user study results

**Updated DSL**

PROGRAM ::= CANVAS? GEOMETRY* GROUP* ANIMATE* <br/>
CANVAS ::= “Canvas” {“color=” COLOR} <br/>
GEOMETRY ::= SHAPE | LINE <br/>
SHAPE ::= “Shape” NAME { SHAPETYPE, HEIGHT, WIDTH, POSX, POSY(, “z-index=” NUMBER)?(, “color=” COLOR)? (, “angle=“ ANGLE)?} <br/>
SHAPETYPE ::= “circle” | “rectangle” | “triangle” <br/>
LINE ::= “Line” NAME {WIDTH, POX, POSY(, “color=” COLOR)?(, “angle=“ ANGLE)?} <br/>
GROUP ::= "Group" NAME {NAME(, NAME)*} <br/>
ANIMATE ::= “Animate” NAME { AT+ (, “loop=” LOOP)?} <br/>
AT ::= [X, Y, START, END(, “rotation=” ROTATION)?] <br/>
START := +NUMBER <br/>
END ::= NUMBER > START <br/>
HEIGHT ::= +NUMBER <br/>
WIDTH ::= +NUMBER <br/>
POSX ::= NUMBER <br/>
POXY ::= NUMBER <br/>
X ::= [0-9]+ <br/>
Y ::= [0-9]+ <br/>
NAME ::= [A-Za-z]+ <br/>
DIGIT ::= [0-9]+      
ANGLE ::= (-)?[0-360] <br/>
COLOR ::= "black" | "blue" | "gray" | "green" | "purple" | "red" | "white" | "yellow" | HEX <br/> 
ROTATION ::= “ccw”|”cw” <br/>
LOOP ::= DIGIT | "inf"

**Additional Resources**

User Guide: https://docs.google.com/document/d/1zvpDE0PCqnd0ifNqU7W71tnbwA8EkYl0dMulV7D0SdI/edit?usp=sharing  
How to Use Animate:  
Download the .jar file, in addition to the input.tcts file and put them both in the same folder, separate from other files. Use your editor of choice (like Notepad) to open up the input file, put in your desired input, and save the file. Double-click the .jar file to run it, and it should open up a tab in your web browser with either an error message printed on the screen, or the animation that you’ve created with the AniMate language.
